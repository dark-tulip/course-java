## Kafka brokers
- кластер кафки состоит из нескольких брокеров (серверов)
- каждый брокер идентифицируется ID
- каждый брокер читает данные из партиций
- подсоединившись к одному bootstrap брокеру вы имеете доступ ко всему кластеру
- партиции одного топика могут расоплогаться на разных брокерах, так данные распредленяются партициями между брокерами
- каждый кафка брокер является бутсрап сервером, благодаря которому вы имеете доступ ко всему кластеру
- каждый брокер знает все об остальных брокерах (партиции, топики и другие метаданные)

# Kafka brokers
- контроллер координирует работу кластера
- один из брокеров в кластере выбирается контроллером
- при replication_factor=3 каждая партиция будет продублирована на одном из брокеров (если брокеров 3)
- чтобы писать данные в партиции, нужно выбрать leader брокера для партиции
    - например, broker 1 is leader for partition 0
    - broker 2 is leader for partition 1
    - each partition should have leader broker
    - репликация с лидера на другие брокеры (**followers**)
    - `ISR` - in sync replica, реплика синхронизированная с лидером
- когда падает лидер, лидером становится один из ISR реплик, когда упавший лидер входит в строй, он догоняет (восстанавливает данные) с нового лидера
- когда в одном брокере больше лидеров чем на других, кафка делает перебалансировку лидера на другой брокер
- у каждой партиции есть свой лидер
- сообщения пишутся в лидер
- данные реплицируются между брокерами
- автоматическим фэйловером лидера занимается kafka controller


## Изменение размера сообщений
- ВНИМАНИЕ, по умолчанию в кафке 1 МБ
https://www.conduktor.io/kafka/how-to-send-large-messages-in-apache-kafka/
